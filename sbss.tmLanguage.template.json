{
    "scopeName": "source.sbss",
    "patterns": [
        {
            "include": "#comment"
        },
        {
            "include": "#directive"
        },
        {
            "include": "#variable-assignement"
        },
        {
            "include": "#style-definition"
        },
        {
            "include": "#property-list",
            "note": "this is a workaround for muti-line property list connected by \\."
        }
    ],
    "repository": {
        "comment": {
            "patterns": [
                {
                    "name": "__STYLE_COMMENT__",
                    "match": "^\\s*--.*"
                }
            ]
        },
        "directive": {
            "patterns": [
                {
                    "match": "^\\s*(import)\\s+(\"([^\"]*)\"|([^,]*))",
                    "captures": {
                        "1": {
                            "name": "__STYLE_SBSS_IMPORT__"
                        },
                        "2": {
                            "name": "__STYLE_FILENAME__"
                        }
                    }
                },
                {
                    "begin": "^\\s*(if|elif)\\s+",
                    "beginCaptures": {
                        "0": {
                            "name": "__STYLE_SBSS_IF_ELIF__"
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#expression"
                        }
                    ]
                },
                {
                    "name": "__STYLE_SBSS_ELSE_END__",
                    "match": "^\\s*(else|end)\\s*$"
                }
            ]
        },
        "variable-assignement": {
            "patterns": [
                {
                    "begin": "^\\s*(\\$[A-Z_]+)\\s*=",
                    "beginCaptures": {
                        "1": {
                            "name": "__STYLE_VARIABLE__"
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#expression"
                        }
                    ]
                }
            ]
        },
        "property-list": {
            "patterns": [
                "__PROP_LIST_PATTERNS__"
            ]
        },
        "property-group": {
            "patterns": [
                "__PROP_GROUP_PATTERNS__"
            ]
        },
        "style-definition": {
            "patterns": [
                {
                    "begin": "^\\s*(@root|(#|%)[\\.a-zA-Z0-9-_ ]+|/[/\\.a-zA-Z0-9-_ ]+)\\s*:",
                    "end": "$",
                    "beginCaptures": {
                        "1": {
                            "name": "__STYLE_SBSS_SELECTOR__"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#property-list"
                        }
                    ]
                },
                {
                    "begin": "^\\s*(@root|(#|%)[\\.a-zA-Z0-9-_ ]+|/[/\\.a-zA-Z0-9-_ ]+)\\s*{",
                    "end": "}",
                    "beginCaptures": {
                        "1": {
                            "name": "__STYLE_SBSS_SELECTOR__"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#property-group"
                        }
                    ]
                }
            ]
        },
        "expression": {
            "patterns": [
                {
                    "include": "#operator"
                },
                {
                    "include": "#variable"
                },
                {
                    "include": "#number"
                }
            ]
        },
        "operator": {
            "patterns": [
                {
                    "match": "(==|\\!=|\\*|\\+|-|/|<|<=|>|>=)",
                    "name": "__STYLE_OPERATOR__"
                }
            ]
        },
        "variable": {
            "patterns": [
                {
                    "name": "__STYLE_VARIABLE__",
                    "match": "\\$[A-Z_]+"
                }
            ]
        },
        "number": {
            "patterns": [
                {
                    "match": "[+-]?([0-9]*[.])?[0-9]+",
                    "name": "__STYLE_NUMBER__"
                }
            ]
        }
    }
}